<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<script> //å³é”®ç¦ç”¨,NodeRequireé‡å®šå‘
    // document.oncontextmenu = function(){
    // alert("å½“å‰é¡µé¢ä¸èƒ½ä½¿ç”¨å³é”®ï¼");
    // return false;
    // }
    window.nodeRequire = require;
    delete window.require;
    delete window.exports;
    delete window.module;
</script>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Kanban Desktop - Settings</title>
    <link rel="stylesheet" type="text/css" href="includes/waifu.css?v=1.4.2"/>
    <link rel="stylesheet" href="./includes/winui3.css">
    <script src="includes/jquery.min.js"></script>
</head>
<style type="text/css">

</style>

<body style="overflow: hidden;">
    <div class="container" id="container">
        <div class="TitleBar">
            <img src="./assets/app.png" width="25" height="25" style="position: absolute;line-height: 26px;margin: 4px 0px 0px 5px;left:5px;">
            <a id="Title" style="height: 30px;line-height: 30px;position:absolute;left:40px;right:30%;text-align: left;">Kanban-Desktop</a>
        </div>
        <!-- <div class="closeset"  onclick="closeset();"><image src="./assets/Cross.png"></image></div> -->
        <div class="setTab" id="setTab"> <!--è®¾ç½®tab-->
            <h3 style="position:absolute;margin-left:15px;">è®¾ç½®</h3>
            <div class="setTabBrickHighlight" id="setTabHighLight" style="right:293px"></div>
            <div class="setTabBrick" id="setTabA" style="right:280px" onclick="setpageA()">
                <svg t="1658426400568" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15439" height=55% style='left:5px;'><path d="M682.666667 170.666667l21.333333 42.666666v320h128V213.333333l23.04-42.666666L832 64h-128l-21.333333 106.666667z" fill="#90A4AE" p-id="15440"></path><path d="M768 192c62.506667 0 64-128 64-128h-128s1.706667 128 64 128z" fill="#B0BEC5" p-id="15441"></path><path d="M680.746667 533.333333h174.506666l38.826667 183.253334a81.92 81.92 0 0 1 1.92 17.706666V874.666667a85.333333 85.333333 0 0 1-85.333333 85.333333h-85.333334a85.333333 85.333333 0 0 1-85.333333-85.333333v-140.373334a81.92 81.92 0 0 1 1.92-17.706666z" fill="#40A9FF" p-id="15442"></path><path d="M661.333333 448m21.333334 0l170.666666 0q21.333333 0 21.333334 21.333333l0 42.666667q0 21.333333-21.333334 21.333333l-170.666666 0q-21.333333 0-21.333334-21.333333l0-42.666667q0-21.333333 21.333334-21.333333Z" fill="#5C6BC0" p-id="15443"></path><path d="M234.666667 359.04V832a128 128 0 0 0 256 0V359.04zM362.666667 896a64 64 0 1 1 64-64 64 64 0 0 1-64 64z" fill="#FF9800" p-id="15444"></path><path d="M490.666667 410.666667H234.666667v45.44l256 87.893333v-133.333333z" fill="#EF6C00" p-id="15445"></path><path d="M466.986667 85.333333v209.92h-208.64V85.333333A234.666667 234.666667 0 0 0 128 294.186667 177.92 177.92 0 0 0 277.333333 469.333333a528 528 0 0 0 85.333334 7.253334 528 528 0 0 0 85.333333-7.253334 177.92 177.92 0 0 0 149.333333-175.36A234.666667 234.666667 0 0 0 466.986667 85.333333z" fill="#FF9800" p-id="15446"></path></svg>
                &nbsp;&nbsp;&nbsp;&nbsp;åŠŸèƒ½<!--<div style="position:absolute;left: 8%;right: 8%;top:60%;font-size:1.8vw;">åŠŸèƒ½è®¾ç½®</div>--></div>
            <div class="setTabBrick" id="setTabB" onclick="setpageB()" style="right:175px">
                <svg t="1658426137514" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3578" height=55% style='left:5px;'><path d="M114.0736 307.2l-1.4336 0.73728v418.33472L512 942.08V511.20128z" fill="#00000033" p-id="3579"></path><path d="M930.73408 302.72512L521.3184 92.16 128.50176 294.07232l-15.86176 8.2944L521.3184 501.76l4.79232-2.16064L931.84 303.45216v-0.3584l-1.10592-0.36864zM526.11072 499.6096L521.3184 501.76l4.79232-2.16064z" fill="#91D5FF" p-id="3580"></path><path d="M1006.40768 264.31488a68.21888 68.21888 0 0 0-29.04064-30.39232L548.00384 7.68a67.51232 67.51232 0 0 0-62.49472 0L56.50432 232.448a66.44736 66.44736 0 0 0-17.64352 15.74912 73.25696 73.25696 0 0 0-11.02848 14.27456A67.87072 67.87072 0 0 0 20.48 291.76832v439.33696a67.33824 67.33824 0 0 0 36.7616 59.31008l428.99456 224.79872c9.32864 5.29408 19.79392 8.31488 30.5152 8.78592h5.15072a64.53248 64.53248 0 0 0 26.10176-6.9632L976.9984 792.25856A67.33824 67.33824 0 0 0 1013.76 732.93824V291.76832a64.23552 64.23552 0 0 0-7.35232-27.45344z m-80.50688 39.90528l-404.3776 199.168-4.77184 2.56v427.25376L107.60192 719.02208V303.85152l15.81056-8.41728L516.75136 89.67168l408.04352 213.8112 1.10592 0.73728z" fill="#40A9FF" p-id="3581"></path></svg>
                &nbsp;&nbsp;&nbsp;ä¸ªæ€§åŒ–<!--<div style="position:absolute;left: 1%;right: 1%;top:60%;font-size:1.8vw;">ä¸ªæ€§åŒ–è®¾ç½®</div>--></div>
            <div class="setTabBrick" id="setTabC" onclick="setpageC()"style="right:70px">
                <svg class="icon" height=55% style='left:5px;' viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="856"><path d="M926.48448 781.15328l-272.97792-423.71072V160.03072h25.40544V92.16H350.1824v67.87072h25.43104v197.41184L102.62016 781.1584A97.792 97.792 0 0 0 184.9344 931.84h659.2512a97.76128 97.76128 0 0 0 82.29888-150.68672zM870.46656 848.384a29.33248 29.33248 0 0 1-26.28096 15.58528H184.9344a29.91104 29.91104 0 0 1-25.18016-46.08l283.8016-440.49408V160.03072h142.00832V377.3952l283.81184 440.48896a29.27104 29.27104 0 0 1 1.09056 30.49984z" fill="#5288F5" p-id="857"></path><path d="M652.288 572.63104H376.832v-68.4544h275.456v68.4544z" fill="#F79C42" p-id="858"></path></svg>
                &nbsp;&nbsp;&nbsp;å®éªŒå®¤<!--<div style="position:absolute;left: 8%;right: 8%;top:60%;font-size:1.7vw;">å®éªŒå®¤ä¸å…³äº</div>--></div>
            <div class="setTabBrickSmall" id="setTabInfo" onclick="setpageInfo()"style="right:20px;">
                <svg t="1670141928749" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3107" height=55%><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM448 448v384h128V448H448z m0-256v128h128V192H448z" p-id="3108" id="info_icon" style="fill:#bbb"></path></svg>
                </div>
        </div>
        <div class="setpage" id="setpageA">
            <div class="setpageINNER">
            <!-- <form> -->
                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸ“± å·¥å…·æ è®¾ç½®</h3>
                <div href="javascript:;" class="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitA();" style="top: 10px;user-select: none;width:auto" >&nbsp;&nbsp;ä¿å­˜å¹¶åº”ç”¨&nbsp;&nbsp;</div>
                <div class="brickContainer">æ˜¾ç¤ºå·¥å…·æ <label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showToolbar"><div class="slider"></div></label></div>
                <div class="brickContainer">ä¸éšè—çœ‹æ¿å¨˜å·¥å…·æ <label class="switch"><input class="input" type="checkbox" name="checkboxA" value="noHideToolbar"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º æœ€å°åŒ–æŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showMinimum"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º æ¨¡å‹åˆ‡æ¢æŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showModelSwitch"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º æè´¨åˆ‡æ¢æŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showTextureSwitch"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º ä¸€è¨€åˆ‡æ¢æŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showHitokotoSwitch"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º çœ‹æ¿å¨˜æˆªå›¾æŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showScreenShot"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º è·³è½¬å…³äºé¡µæŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showInfo"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º å¤œé—´æ¨¡å¼æŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showNightmode"><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤º è¿”å›é¦–é¡µæŒ‰é’®<label class="switch"><input class="input" type="checkbox" name="checkboxA" value="showMainpage"><div class="slider"></div></label></div>
                <!-- <div class="box">
                    <button type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitA();" class="btn">ä¿å­˜å¹¶åº”ç”¨</button>
                </div> -->
                <!-- <input type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitA()" style="margin-top:7px;"/> -->
            <!-- </form> -->
            </div>
        </div>
        <div class="setpage" id="setpageB" style="display: none;">
            <div class="setpageINNER">
            <!-- <form> -->
                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸ§± æ¨¡å‹è®¾ç½®</h3>
                <div class="brickContainer">æ¨¡å‹éšæœºåˆ‡æ¢<label class="switch"><input class="input" type="checkbox" name="checkboxB" value="modelRandSwitch" /><div class="slider"></div></label></div>
                <div class="brickContainer">æè´¨éšæœºåˆ‡æ¢<label class="switch"><input class="input" type="checkbox" name="checkboxB" value="textureRandSwitch" /><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤ºä¸€è¨€<label class="switch"><input class="input" type="checkbox" name="checkboxB" value="showHitokoto" /><div class="slider"></div></label></div>
                <div class="brickContainer">æ˜¾ç¤ºæ¬¢è¿è¯<label class="switch"><input class="input" type="checkbox" name="checkboxB" value="showWelcome" /><div class="slider"></div></label></div>
                <div class="brickContainer">è‡ªå®šä¹‰æ¨¡å‹API<!-- <li style="margin-top:10px;margin-bottom:3px;">è‡ªå®šä¹‰æ¨¡å‹API</li> --><input class="inputText" type="text" name="checkboxB" placeholder="è¾“å…¥è‡ªå®šä¹‰APIåœ°å€" required></div>
                
                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸ§­ æ‚¬æµ®çƒè®¾ç½®</h3>
                <div class="brickContainer" style="height: 100px;">
                    <div id="localBubbleCurrentPath" style="margin:auto 10px;text-align: center;height:80px;width:80px;background-size:cover;border-radius:7px;box-shadow: 0px 0px 5px 0px rgba(45, 45, 45, 0.75);"></div>
                    <div href="javascript:;" class="button">é€‰æ‹©æ–‡ä»¶<input id="localBubbleSelect" type="file" class="inputFile" accept="image/*" onchange="javascript:{document.getElementById('fileInfoBubble').innerHTML = document.getElementById('localBubbleSelect').files[0].path.replaceAll('\\','/')
                document.getElementById('localBubbleCurrentPath').style.background = 'url('+document.getElementById('localBubbleSelect').files[0].path.replaceAll('\\','/')+') no-repeat center';document.getElementById('localBubbleCurrentPath').style.backgroundSize='cover'}"></div>
                </div> <!-- è·å–Bubbleæœ¬åœ°èƒŒæ™¯æ–‡ä»¶è·¯å¾„ -->
                <div class="brickContainer">å½“å‰é€‰å®šèƒŒæ™¯<div id="fileInfoBubble" class="fileInfo" style="border: none;">æœªé€‰å®š</div></div>
                
                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸ“š é«˜çº§è®¾ç½®<a style="font-size: 13px;"> è‡ªå®šä¹‰æ›´å¤šé«˜çº§è®¾ç½®é¡¹</a></h3>
                <div class="brickContainer"><div>è‡ªå®šä¹‰æœç´¢å¼•æ“<br><!--<li style="margin-top:10px;margin-bottom:3px;">è‡ªå®šä¹‰æœç´¢å¼•æ“</li>--><a class="brickSubtitle">è¾“å…¥æœç´¢å¼•æ“URL</a></div>
                <input class="inputText" type="text" name="checkboxB" placeholder="é»˜è®¤ä¸ºGoogle" required></div>

                <div class="brickContainer" style="height: 60px;color: #ff4848;"><div>æ¸…é™¤æ•°æ®<br><a class="brickSubtitle" style="font-size: 13px;color: #ff4848;"> æ¸…é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰</a></div>
                    <button type="button" value="æ¸…é™¤æ•°æ®" onclick="localStorage.clear();" class="button_red" style="width:120px">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
                </div>
                
                <div class="box">
                    <button type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitB();" class="btn">ä¿å­˜å¹¶åº”ç”¨</button>
                </div>
                <!-- <input type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitB()" style="margin-top:7px;"/> -->
            <!-- </form> -->
            </div>
        </div>
        <div class="setpage" id="setpageC" style="display: none;">
            <div class="setpageINNER">
            <!-- <form> -->
                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸ§ª å®éªŒå®¤</h3>
                <div href="javascript:;" class="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitC();" style="top: 10px;user-select: none;width:auto" >&nbsp;&nbsp;ä¿å­˜å¹¶åº”ç”¨&nbsp;&nbsp;</div>
                <div class="brickContainer" style="background-color:#433519"><svg t="1669908006524" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1391" data-darkreader-inline-fill="" width="20" height="20"><path d="M510.032 93.09c-229.9 0-416.94 187.924-416.94 418.91 0 230.986 187.92 418.91 418.908 418.91 230.986 0 418.91-187.924 418.91-418.91 0-230.986-188.804-418.91-420.88-418.91z" fill="#fce100" p-id="1392" style="--darkreader-inline-fill: #fce100;" data-darkreader-inline-fill=""></path><path d="M558.546 723.78h-93.092v-93.09h93.092zM558.546 539.928h-93.092V302.546h93.092z" fill="#000" p-id="1393" style="--darkreader-inline-fill: #181a1b;" data-darkreader-inline-fill=""></path></svg><p style="margin-left:13px;font-size: 15px;font-weight: bold;">è¿™é‡Œçš„è®¾ç½®å…·æœ‰å®éªŒæ€§</p></div>
                <div class="brickContainer">å…¨å±ä»»æ„æ‹–æ‹½<label class="switch"><input class="input" type="checkbox" name="checkboxC" value="unlimitedDrag"><div class="slider"></div></label></div>
                <div class="brickContainer">é«˜æ¸…æ™°åº¦æ¸²æŸ“<label class="switch"><input class="input" type="checkbox" name="checkboxC" value="highQualityRender" checked="true" disabled><div class="slider"></div></label></div>
                <div class="brickContainer">å¼€å‘äººå‘˜é€‰é¡¹<label class="switch"><input class="input" type="checkbox" name="checkboxC" value="developerMode"><div class="slider"></div></label></div>
                <div class="brickContainer">å¯ç”¨æœ¬åœ°æ¨¡å‹æ–‡ä»¶åŠ è½½<label class="switch"><input class="input" type="checkbox" name="checkboxC" value="localModelLoad"><div class="slider"></div></label></div>
                <div class="brickContainer">
                    <div>é€‰æ‹©æœ¬åœ°æ¨¡å‹æ–‡ä»¶<br><a class="brickSubtitle" style="color: crimson;">*æ³¨æ„ï¼Œè¯·é€‰æ‹©æ¨¡å‹çš„JSONæ¸…å•æ–‡ä»¶ï¼</a></div>
                    <div href="javascript:;" class="button" style="width:140px">é€‰æ‹©æ¨¡å‹æ–‡ä»¶<input id="localModelSelect" type="file" class="inputFile" onchange="javascript:{document.getElementById('localModelCurrentPath').innerHTML = document.getElementById('localModelSelect').value;$('#localModelCurrentPath').scrollLeft( $('#localModelCurrentPath')[0].scrollWidth);}"></div><!--è·å–æœ¬åœ°æ–‡ä»¶è·¯å¾„ -->
                    <!-- <input id="localModelSelect" type="file" style="opacity: 0;"> è·å–æœ¬åœ°æ–‡ä»¶è·¯å¾„ --></div>
                <div class="brickContainer">å½“å‰é€‰å®šæ¨¡å‹<div id="localModelCurrentPath" class="fileInfo" style="border: none;"></div></div>

                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸ§ª è¯­è¨€æ¨¡å‹è®¾ç½®</h3>
                <div class="brickContainer">ChatGPTå¯¹è¯æ”¯æŒ<label class="switch"><input class="input" type="checkbox" name="checkboxC" value="ChatGPTFunc"><div class="slider"></div></label></div>
                <div class="brickContainer">ChatGPT API Key<input class="inputText" type="text" name="checkboxC" placeholder="è¾“å…¥API Key" required></div>
                
                <!-- <div class="box">
                    <button type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitC();" class="btn">ä¿å­˜å¹¶åº”ç”¨</button>
                </div> -->
            <!-- </form> -->
            </div>
        </div>
        <div class="setpage" id="setpageInfo" style="display: none;">
            <div class="setpageINNER">
                <h3 style="margin-top:15px;margin-bottom:15px;margin-left:13px;">ğŸš€ å…³äºKanban-Desktop</h3>
                <div style="text-align: center;"><img src="./assets/app.png" alt="App Info" width="84" height="84"></div>
                <div class="brickContainer">å½“å‰ç‰ˆæœ¬<p id="App_Ver" class="brickRightText"></p></div>
                <div class="brickContainer" id="if_have_update"><div id="update_ver_get" style="position:absolute;left:10px"></div>
                <button type="button" value="æŸ¥çœ‹æ›´æ–°" onclick="shell.openExternal('https://github.com/JimHans/live2d-kanban-desktop/releases/latest');" class="button" id="update_button">æŸ¥çœ‹æ›´æ–°</button></div>
                <div class="brickContainer">Build Version<p id="App_Build" class="brickRightText"></p></div>
                <!-- *ç‰ˆæœ¬ä¿¡æ¯ -->
                <div class="brickContainer">Node.js ç‰ˆæœ¬<span id="node-version" class="brickRightText"></span></div>
                <div class="brickContainer">Chromium å†…æ ¸ç‰ˆæœ¬<span id="chrome-version" class="brickRightText"></span></div>
                <div class="brickContainer">Electron æ¡†æ¶ç‰ˆæœ¬<span id="electron-version" class="brickRightText"></span></div>
                <div class="brickContainer">Designed By<span class="brickRightText">JimHan @ Zerolite Studio</span><!--<p style="font-size: 14px;margin-bottom:-5px;">Designed By JimHan @ Zerolite Studio</p>--></div>
            </div>
        </div>
    </div>
</body>
<script>
    const { ipcRenderer,shell } = nodeRequire('electron'); //Electron ä¾èµ–è°ƒå…¥
    window.onload = function () { //è·å–è½¯ä»¶ç‰ˆæœ¬å·
        var package = nodeRequire("./package.json");
        document.getElementById("App_Ver").innerHTML=package.name+" v"+package.version; // Get Version
        document.getElementById("App_Build").innerHTML=package.buildinf; // Get Build
        for (const versionType of['chrome', 'electron', 'node']) { 
        document.getElementById(`${versionType}-version`).innerText = process.versions[versionType]  // Get Framework
        }
        // *æ›´æ–°æ£€æµ‹
        $.getJSON("https://api.github.com/repos/jimhans/live2d-kanban-desktop/releases/latest", function(data1){
            document.getElementById('update_button').style.backgroundColor='#252525';
            if(data1.tag_name!=("v"+package.version)){
            document.getElementById('setTabInfo').style.backgroundColor='#393d1b';
            document.getElementById('info_icon').style.fill='#6ccb5f';
            document.getElementById('update_ver_get').innerText='æœ‰æ–°ç‰ˆæœ¬ï¼šç‰ˆæœ¬å· '+data1.tag_name;
            document.getElementById('if_have_update').style.backgroundColor='#393d1b';}
        else{document.getElementById('update_ver_get').innerText='å½“å‰æ˜¯æœ€æ–°ç‰ˆæœ¬';document.getElementById('if_have_update').style.backgroundColor='#2b4f6c';}
        }).fail(function() {document.getElementById('update_ver_get').innerText='æ— æ³•æ£€æµ‹åˆ°ç‰ˆæœ¬æ›´æ–°æ•°æ®'}); 
    }

    // åˆå§‹åŒ–PageAå¤é€‰æ¡†
    var checkboxAInit = document.getElementsByName("checkboxA");
    //å¾ªç¯å¤šé€‰æ¡†æ•°ç»„
    for (var i = 0; i < checkboxAInit.length; i++) {
        if (localStorage.getItem(checkboxAInit[i].value) == 'true') {
            checkboxAInit[i].checked = true;}
        else if (localStorage.getItem(checkboxAInit[i].value) == 'false')
            {checkboxAInit[i].checked = false;}
        else {checkboxAInit[i].checked = true;}
    }

    // åˆå§‹åŒ–PageBå¤é€‰æ¡†
    var checkboxBInit = document.getElementsByName("checkboxB");
    //å¾ªç¯å¤šé€‰æ¡†æ•°ç»„
    for (var i = 0; i < 4; i++) {
        if (localStorage.getItem(checkboxBInit[i].value) == 'true') {
            checkboxBInit[i].checked = true;}
        else if (localStorage.getItem(checkboxBInit[i].value) == 'false')
            {checkboxBInit[i].checked = false;}
        else {if(i==0) checkboxBInit[i].checked = false; else checkboxBInit[i].checked = true;}
    }
    if ((!localStorage.getItem("localBubblePath")) || localStorage.getItem("localBubblePath") == ""){document.getElementById("localBubbleCurrentPath").style.backgroundImage='url(./assets/box.png)';}
    else {document.getElementById("localBubbleCurrentPath").style.backgroundImage="url("+localStorage.getItem("localBubblePath")+")";
    document.getElementById("localBubbleCurrentPath").style.backgroundSize="cover";} //è‡ªå®šä¹‰æ°”æ³¡èƒŒæ™¯è·å–
    if ((!localStorage.getItem("customAPI")) || localStorage.getItem("customAPI") == ""){checkboxBInit[4].value="//waifuapi.zerolite.cn/live2d-api/";}
    else {checkboxBInit[4].value=localStorage.getItem("customAPI");} //è‡ªå®šä¹‰APIè·å–
    if ((!localStorage.getItem("customSearch")) || localStorage.getItem("customSearch") == ""){checkboxBInit[5].value="https://www.google.com/search?q=";}
    else {checkboxBInit[5].value=localStorage.getItem("customSearch");} //è‡ªå®šä¹‰æœç´¢å¼•æ“è·å–

    //åˆå§‹åŒ–PageCå¤é€‰æ¡†
    var checkboxCInit = document.getElementsByName("checkboxC");
    if (localStorage.getItem(checkboxCInit[0].value) == 'true') {checkboxCInit[0].checked = true;}
    if (localStorage.getItem(checkboxCInit[3].value) == 'true') {checkboxCInit[3].checked = true;
        document.getElementById("localModelCurrentPath").innerHTML="å½“å‰æ–‡ä»¶ä¸º"+localStorage.getItem('localModelPath');}
    if (localStorage.getItem(checkboxCInit[4].value) == 'true') {checkboxCInit[4].checked = true;}
    if ((!localStorage.getItem("ChatgptKey")) || localStorage.getItem("ChatgptKey") == ""){checkboxCInit[5].value="";}
    else {checkboxCInit[5].value=localStorage.getItem("ChatgptKey");} //è‡ªå®šä¹‰APIè·å–
    
    // function closeset() {ipcRenderer.send('Settings','Close');} // å…³é—­
    
    function setpageA() { //ç‚¹å‡»æ˜¾ç¤ºè®¾ç½®é¡µé¢A
        document.getElementById("setpageA").style.display="block";
        document.getElementById("setpageB").style.display="none";
        document.getElementById("setpageC").style.display="none";
        document.getElementById("setpageInfo").style.display="none";
        document.getElementById("setTabHighLight").style.right="293px";
        document.getElementById("setTabHighLight").style.width="70px";
        document.getElementById("setTab").style.height="60px";
        // document.getElementById("setTabA").style.backgroundColor="#393939";
        // document.getElementById("setTabB").style.backgroundColor="#272727";
        // document.getElementById("setTabC").style.backgroundColor="#272727";
        // document.getElementById("setTabA").style.color="whitesmoke";
        // document.getElementById("setTabB").style.color="black";
        // document.getElementById("setTabC").style.color="black";
    }
    
    function setpageB() { //ç‚¹å‡»æ˜¾ç¤ºè®¾ç½®é¡µé¢B
        document.getElementById("setpageA").style.display="none";
        document.getElementById("setpageB").style.display="block";
        document.getElementById("setpageC").style.display="none";
        document.getElementById("setpageInfo").style.display="none";
        document.getElementById("setTabHighLight").style.right="187px";
        document.getElementById("setTabHighLight").style.width="70px";
        document.getElementById("setTab").style.height="60px";
        // document.getElementById("setTabA").style.backgroundColor="#272727";
        // document.getElementById("setTabB").style.backgroundColor="#393939";
        // document.getElementById("setTabC").style.backgroundColor="#272727";
        // document.getElementById("setTabB").style.color="whitesmoke";
        // document.getElementById("setTabA").style.color="black";
        // document.getElementById("setTabC").style.color="black";
    }
    
    function setpageC() { //ç‚¹å‡»æ˜¾ç¤ºè®¾ç½®é¡µé¢C
        document.getElementById("setpageA").style.display="none";
        document.getElementById("setpageB").style.display="none";
        document.getElementById("setpageC").style.display="block";
        document.getElementById("setpageInfo").style.display="none";
        document.getElementById("setTabHighLight").style.right="82px";
        document.getElementById("setTabHighLight").style.width="70px";
        document.getElementById("setTab").style.height="60px";
        $('#localModelCurrentPath').scrollLeft( $('#localModelCurrentPath')[0].scrollWidth);
        // document.getElementById("setTabA").style.backgroundColor="#272727";
        // document.getElementById("setTabB").style.backgroundColor="#272727";
        // document.getElementById("setTabC").style.backgroundColor="#393939";
        // document.getElementById("setTabC").style.color="whitesmoke";
        // document.getElementById("setTabA").style.color="black";
        // document.getElementById("setTabB").style.color="black";
    }

    function setpageInfo() { //ç‚¹å‡»æ˜¾ç¤ºå…³äºç•Œé¢
        document.getElementById("setpageA").style.display="none";
        document.getElementById("setpageB").style.display="none";
        document.getElementById("setpageC").style.display="none";
        document.getElementById("setpageInfo").style.display="block";
        document.getElementById("setTabHighLight").style.right="28px";
        document.getElementById("setTabHighLight").style.width="17px";
        document.getElementById("setTab").style.height="60px";
        // document.getElementById("setTabA").style.backgroundColor="#272727";
        // document.getElementById("setTabB").style.backgroundColor="#272727";
        // document.getElementById("setTabC").style.backgroundColor="#393939";
        // document.getElementById("setTabC").style.color="whitesmoke";
        // document.getElementById("setTabA").style.color="black";
        // document.getElementById("setTabB").style.color="black";
    }


    function submitA() { //ç‚¹å‡»ä¿å­˜A
        var checkboxA = document.getElementsByName("checkboxA");
        //å¾ªç¯å¤šé€‰æ¡†æ•°ç»„
        for (var i = 0; i < checkboxA.length; i++) {
                if (checkboxA[i].checked == true) {
                    localStorage.setItem(checkboxA[i].value,true);
                }
                else {localStorage.setItem(checkboxA[i].value,false);}
        }
        ipcRenderer.send('Mainpage','Refresh');
    }

    function submitB() { //ç‚¹å‡»ä¿å­˜B
        var checkboxB = document.getElementsByName("checkboxB");
        for (var i = 0; i < 4; i++) {
            if (checkboxB[i].checked == true) {localStorage.setItem(checkboxB[i].value,true);}
            else {localStorage.setItem(checkboxB[i].value,false);}
        }
        localStorage.setItem("customAPI",checkboxB[4].value); //ä¿å­˜è‡ªå®šä¹‰API
        localStorage.setItem("customSearch",checkboxB[5].value); //ä¿å­˜è‡ªå®šä¹‰æœç´¢å¼•æ“
        if(document.getElementById('localBubbleSelect').files[0]) //ä¿å­˜è‡ªå®šä¹‰æ°”æ³¡
        {
            //è·å–è¯»å–æ–‡ä»¶çš„Fileå¯¹è±¡
            var selectedBubble = document.getElementById('localBubbleSelect').files[0];
            var Filename = selectedBubble.name;//è¯»å–é€‰ä¸­æ–‡ä»¶çš„æ–‡ä»¶å
            var BubbleUrl = selectedBubble.path;
            var BubblePic = 0;
            if(!/image\/\w+/.test(selectedBubble.type))           //åˆ¤æ–­è·å–çš„æ˜¯å¦ä¸ºå›¾ç‰‡æ–‡ä»¶
            {
                alert("è¯·ç¡®ä¿æ–‡ä»¶ä¸ºå›¾åƒæ–‡ä»¶");
                return false;
            }
            var reader=new FileReader();
            reader.readAsDataURL(selectedBubble);
            reader.onload=function(e)
            {localStorage.setItem("localBubblePath",this.result);}//ä¿å­˜BubblePath
            // localStorage.setItem("localBubblePath",BubbleUrl);
            // setTimeout(function() {
            //     document.getElementById("localBubbleCurrentPath").style.background="url("+localStorage.getItem("localBubblePath")+") no-repeat";
            //     document.getElementById("localBubbleCurrentPath").style.backgroundSize="cover";
            // }, 500);//å»¶æ—¶ç­‰å¾…æ•°æ®åº“å­˜å…¥
            console.log(Filename,BubbleUrl);
        }
        ipcRenderer.send('Mainpage','Refresh');
    }

    function submitC() { //ç‚¹å‡»ä¿å­˜C
        var checkboxC = document.getElementsByName("checkboxC");
        if (checkboxC[0].checked == true) {localStorage.setItem(checkboxC[0].value,true);}
        else {localStorage.setItem(checkboxC[0].value,false);}
        if (checkboxC[2].checked == true) {ipcRenderer.send('dev','Open');} //Develop Mode æ— è®°å¿†
        if (checkboxC[3].checked == true) {localStorage.setItem(checkboxC[3].value,true);} //æœ¬åœ°æ¨¡å¼
        else {localStorage.setItem(checkboxC[3].value,false);}
        if (checkboxC[4].checked == true) {localStorage.setItem(checkboxC[4].value,true);} //chatgptå¼€å…³
        else {localStorage.setItem(checkboxC[4].value,false);}
        localStorage.setItem("ChatgptKey",checkboxC[5].value); //ä¿å­˜chatgptKey

        if(document.getElementById('localModelSelect').files[0])
        {
            //è·å–è¯»å–æ–‡ä»¶çš„Fileå¯¹è±¡
            var selectedModel = document.getElementById('localModelSelect').files[0];
            var Filename = selectedModel.name;//è¯»å–é€‰ä¸­æ–‡ä»¶çš„æ–‡ä»¶å
            var ModelUrl = selectedModel.path;
            localStorage.setItem("localModelPath",ModelUrl); //ä¿å­˜ModelPath
            document.getElementById("localModelCurrentPath").innerHTML="å½“å‰æ–‡ä»¶ä¸º"+localStorage.getItem('localModelPath');
            console.log(Filename,ModelUrl);
        }
        ipcRenderer.send('Mainpage','Refresh');
    }
</script>
</html>