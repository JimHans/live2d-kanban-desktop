<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<script> //å³é”®ç¦ç”¨
    document.oncontextmenu = function(){
    alert("å½“å‰é¡µé¢ä¸èƒ½ä½¿ç”¨å³é”®ï¼");
    return false;
    }
</script>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Kanban Desktop - Settings</title>
    <link rel="stylesheet" type="text/css" href="includes/waifu.css?v=1.4.2"/>
</head>
<style type="text/css">
	input::-webkit-input-placeholder {
    /* ä¿®æ”¹å­—ä½“é¢œè‰² */
    border-radius: 15px;
    font-family: 'Roboto',arial,sans-serif;
    color: #809FC8;
    padding-left: 10px; 
    color: #CBCBCB;
	}
	::-webkit-scrollbar-track{
    box-shadow: inset 0 0 2px rgba(197,197,197,0.80);
    border-radius: 5px;
    }
    html,body{
        height:90%;
        width: 94%;
        margin: 3%;
        padding: 0;
        opacity: 0.98;
    }
    .container {
        width: 100%;
        height: 100%;
        margin: 0px;
        padding: 0;
        border:1px solid rgb(165, 165, 165);
        background-color: rgb(255, 255, 255);
        border-radius:15px;
        box-shadow: 0px 0px 10px -1px rgba(170, 170, 170, 0.75);
        -webkit-box-shadow: 0px 0px 10px -1px rgba(170, 170, 170, 0.75);
        -moz-box-shadow: 0px 0px 10px -1px rgba(170, 170, 170, 0.75);
        -webkit-app-region: drag;
    }
    .setpage {
        width: 64%;
        height: 67%;
        position:absolute;
        background-color: rgb(255, 255, 255);
        border: 2px 2px 2px 2px solid black; 
        float:right;
        margin-top: 6%;
        left: 30%;
        -webkit-app-region: no-drag;
    }
    .setpageINNER {
        width: 100%;
        height: 100%;
        overflow-y:scroll;
        position:absolute;
        background-color: rgb(255, 255, 255);
        border: 2px 2px 2px 2px solid black; 
        -webkit-app-region: no-drag;
    }
    .setTab {
        width: 17%;
        height: 83%;
        text-align: center;
        background-color: rgb(255, 255, 255);
        border-radius:15px;
        box-shadow: 0px 0px 10px -1px rgba(0,0,0,0.75);
        -webkit-box-shadow: 0px 0px 10px -1px rgba(0,0,0,0.75);
        -moz-box-shadow: 0px 0px 10px -1px rgba(0,0,0,0.75);
        float:left;
        margin-top: 4.5%;
        margin-bottom: 4.5%;
        margin-left: 4%;
        -webkit-app-region: no-drag;
    }
    .setTabBrick {
        width: 80%;
        height: 20%;
        text-align: center;
        background-color: rgb(223, 223, 223);
        border-radius:10px;
        border: 2px solid rgb(190, 190, 190); 
        float:left;
        margin-left: 9%;
        margin-top: 10%;
        -webkit-app-region: no-drag;
    }
    .input {
        margin: 5% 3% 2% 0%;
    }
    .closeset {
        width: 20px;
        height: 20px;
        text-align: center;
        background-color: rgb(255, 255, 255);
        border-radius:15px;
        border: 1px solid rgb(190, 190, 190); 
        float:right;
        margin-top: 5px;
        margin-right: 5px;
        z-index: 5;
        -webkit-app-region: no-drag;
        transition: background-color .25s;
    }
    .closeset:hover {
    background-color: #fdcbcb;
    }
    .closeset:active::after {
    background-color: #ff4848;
    }
    .box {
    height: auto;
    text-align: center;
    position: relative;
    margin: 6% 5% 5% 5%;
    }
    .btn {
    position: relative;
    width: 45%;
    height: 30px;
    border-radius: 4px;
    background-color: #1976d2;
    color: #fff;
    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.15), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
    font-size: 14px;
    outline: 0;
    border: 0;
    cursor: pointer;
    overflow: hidden;
    margin-right: 8%;
    transition: background-color .25s;
    }
    .btn:hover {
    background-color: #276aac;
    }
    .btn::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: radial-gradient(circle, #ccc 10%, transparent 10.1%);
    transform: scale(10);
    opacity: 0;
    transition: all .6s;
    }
    .btn:active::after {
    transform: scale(0);
    opacity: .5;
    transition: 0s;
    }
    .btnred {
    position: relative;
    width: 45%;
    height: 30px;
    border-radius: 4px;
    background-color: #d21919;
    color: #fff;
    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.15), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
    font-size: 14px;
    outline: 0;
    border: 0;
    cursor: pointer;
    overflow: hidden;
    margin-right: 8%;
    transition: background-color .25s;
    }
    .btnred:hover {
    background-color: #ac2727;
    }
    .btnred::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: radial-gradient(circle, #ccc 10%, transparent 10.1%);
    transform: scale(10);
    opacity: 0;
    transition: all .6s;
    }
    .btnred:active::after {
    transform: scale(0);
    opacity: .5;
    transition: 0s;
    }
</style>

<body style="overflow: hidden;">
    <div class="container" id="container">
        <div class="closeset"  onclick="closeset();"><image src="./assets/Cross.png"></image></div>
        <div class="setTab">
            <h3 style="margin-top:5px;margin-bottom:3px;">è®¾ç½®</h3>
            <div class="setTabBrick" id="setTabA" style="color: whitesmoke;background-color: rgb(85, 85, 85);" onclick="setpageA()"><p style="margin-top: 13%;margin-bottom: 14%;font:menu;">å·¥å…·æ <br/>è®¾ç½®</p></div>
            <div class="setTabBrick" id="setTabB" onclick="setpageB()"><p style="margin-top: 13%;margin-bottom: 20%;font:menu;">æ¨¡å‹ä¸<br/>é«˜çº§è®¾ç½®</p></div>
            <div class="setTabBrick" id="setTabC" onclick="setpageC()"><p style="margin-top: 13%;margin-bottom: 20%;font:menu;">å®éªŒå®¤ä¸<br/>å…³äº</p></div>
        </div>
        <div class="setpage" id="setpageA">
            <div class="setpageINNER">
            <form>
                <h3 style="margin-top:5px;margin-bottom:3px;">ğŸ“± å·¥å…·æ è®¾ç½®</h3><HR>
                <input class="input" type="checkbox" name="checkboxA" value="showToolbar">æ˜¾ç¤ºå·¥å…·æ 
                <input class="input" type="checkbox" name="checkboxA" value="noHideToolbar">ä¸éšè—å·¥å…·æ <br/>
                <input class="input" type="checkbox" name="checkboxA" value="showMinimum">æ˜¾ç¤ºæœ€å°åŒ–æŒ‰é’®
                <input class="input" type="checkbox" name="checkboxA" value="showModelSwitch">æ˜¾ç¤ºæ¨¡å‹åˆ‡æ¢<br/>
                <input class="input" type="checkbox" name="checkboxA" value="showTextureSwitch">æ˜¾ç¤º æè´¨åˆ‡æ¢
                <input class="input" type="checkbox" name="checkboxA" value="showHitokotoSwitch">æ˜¾ç¤º ä¸€è¨€åˆ‡æ¢<br/>
                <input class="input" type="checkbox" name="checkboxA" value="showScreenShot">æ˜¾ç¤º çœ‹æ¿å¨˜æˆªå›¾
                <input class="input" type="checkbox" name="checkboxA" value="showInfo">æ˜¾ç¤º è·³è½¬å…³äºé¡µ<br/>
                <input class="input" type="checkbox" name="checkboxA" value="showNightmode">æ˜¾ç¤º å¤œé—´æ¨¡å¼
                <input class="input" type="checkbox" name="checkboxA" value="showMainpage">æ˜¾ç¤º è¿”å›é¦–é¡µ
                <HR>
                <div class="box">
                    <button type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitA();" class="btn">ä¿å­˜å¹¶åº”ç”¨</button>
                </div>
                <!-- <input type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitA()" style="margin-top:7px;"/> -->
            </form>
            </div>
        </div>
        <div class="setpage" id="setpageB" style="display: none;">
            <div class="setpageINNER">
            <form>
                <h3 style="margin-top:5px;margin-bottom:3px;">ğŸ§± æ¨¡å‹è®¾ç½®</h3><HR>
                <label><input class="input" type="checkbox" name="checkboxB" value="modelRandSwitch" />æ¨¡å‹éšæœºåˆ‡æ¢</label>
                <label><input class="input" type="checkbox" name="checkboxB" value="textureRandSwitch" />æè´¨éšæœºåˆ‡æ¢</label><br/>
                <label><input class="input" type="checkbox" name="checkboxB" value="showHitokoto" />æ˜¾ç¤ºä¸€è¨€</label>
                <label><input class="input" type="checkbox" name="checkboxB" value="showWelcome" />æ˜¾ç¤ºæ¬¢è¿è¯</label>
                <li style="margin-top:10px;margin-bottom:3px;">è‡ªå®šä¹‰æ¨¡å‹API</li>
                <input class="input" type="text" name="checkboxB" placeholder="è¾“å…¥è‡ªå®šä¹‰APIåœ°å€" style="border-radius: 15px;font-size: medium;width: 90%;text-align: center;height: 6%;color: #809FC8;" required>
                <h3 style="margin-top:5px;margin-bottom:3px;">ğŸ“š é«˜çº§è®¾ç½®<a style="font-size: 13px;"> è‡ªå®šä¹‰æ›´å¤šé«˜çº§è®¾ç½®é¡¹</a></h3><HR>
                <li style="margin-top:10px;margin-bottom:3px;">è‡ªå®šä¹‰æœç´¢å¼•æ“<a style="font-size: 13px;"> è¾“å…¥æœç´¢å¼•æ“URL</a></li>
                <input class="input" type="text" name="checkboxB" placeholder="é»˜è®¤ä¸ºGoogle" style="border-radius: 15px;font-size: medium;width: 90%;text-align: center;height: 6%;color: #809FC8;" required>
                <li style="margin-top:10px;margin-bottom:3px; color: #ff4848;">æ¸…é™¤æ•°æ®<a style="font-size: 13px;"> æ¸…é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰</a></li>
                <div class="box">
                    <button type="button" value="æ¸…é™¤æ•°æ®" onclick="localStorage.clear();" class="btnred">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
                </div>
                <HR>
                <div class="box">
                    <button type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitB();" class="btn">ä¿å­˜å¹¶åº”ç”¨</button>
                </div>
                <!-- <input type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitB()" style="margin-top:7px;"/> -->
            </form>
            </div>
        </div>
        <div class="setpage" id="setpageC" style="display: none;">
            <div class="setpageINNER">
            <form>
                <h3 style="margin-top:5px;margin-bottom:3px;">ğŸ§ª å®éªŒæ€§</h3><HR>
                <p style="font-size: 15px;font-weight: bold;">è¿™é‡Œçš„è®¾ç½®å…·æœ‰å®éªŒæ€§</p>
                <input class="input" type="checkbox" name="checkboxC" value="unlimitedDrag">å…¨å±ä»»æ„æ‹–æ‹½
                <input class="input" type="checkbox" name="checkboxC" value="highQualityRender">é«˜æ¸…æ™°åº¦æ¸²æŸ“<br/>
                <input class="input" type="checkbox" name="checkboxC" value="developerMode">å¼€å‘äººå‘˜é€‰é¡¹
                <input class="input" type="checkbox" name="checkboxC" value="localModelLoad">å¯ç”¨æœ¬åœ°æ¨¡å‹æ–‡ä»¶åŠ è½½
                <li style="margin-top:10px;margin-bottom:3px;">é€‰æ‹©æœ¬åœ°æ¨¡å‹æ–‡ä»¶</li>
                <input id="localModelSelect" type="file" style="margin: 5% 0% 2% 0%;"> <!-- è·å–æœ¬åœ°æ–‡ä»¶è·¯å¾„ -->
                <div id="localModelCurrentPath" style="margin: 5% 0% 2% 0%;text-align: center;font-size: smaller;"></div>
                <div style="margin: 5% 0% 2% 0%;color: crimson;font-size: smaller;">*æ³¨æ„ï¼Œè¯·é€‰æ‹©åä¸ºmodel.jsonçš„JSONæ¸…å•æ–‡ä»¶ï¼</div>
                <HR>
                <div class="box">
                    <button type="button" value="ä¿å­˜å¹¶åº”ç”¨" onclick="submitC();" class="btn">ä¿å­˜å¹¶åº”ç”¨</button>
                </div>
                <h3 style="margin-top:10px;margin-bottom:3px;">ğŸš€ å…³äºKanban-Desktop</h3><HR>
                <div style="text-align: center;"><img src="./assets/app.png" alt="App Info" width="64" height="64">
                <h4 id="App_Ver" style="font-size: 14px;margin-top:5px;margin-bottom:-5px;">Kanban-Desktop</h4>
                <p id="App_Build" style="font-size: 14px;margin-bottom:-5px;">Stable Build 2022-04-18</p>
                <p style="font-size: 14px;margin-bottom:-5px;">Written By Zerolite Studio and JimHan</p></div>
            </form>
            </div>
        </div>
    </div>
</body>
<script>
    window.nodeRequire = require;
    delete window.require;
    delete window.exports;
    delete window.module;
    const { ipcRenderer,shell } = nodeRequire('electron'); //Electron ä¾èµ–è°ƒå…¥
    window.onload = function () { //è·å–è½¯ä»¶ç‰ˆæœ¬å·
        var package = nodeRequire("./package.json");
        document.getElementById("App_Ver").innerHTML=package.name+" v"+package.version; // Get Version
        document.getElementById("App_Build").innerHTML=package.buildinf; // Get Build
    }

    // åˆå§‹åŒ–PageAå¤é€‰æ¡†
    var checkboxAInit = document.getElementsByName("checkboxA");
    //å¾ªç¯å¤šé€‰æ¡†æ•°ç»„
    for (var i = 0; i < checkboxAInit.length; i++) {
        if (localStorage.getItem(checkboxAInit[i].value) == 'true') {
            checkboxAInit[i].checked = true;}
        else if (localStorage.getItem(checkboxAInit[i].value) == 'false')
            {checkboxAInit[i].checked = false;}
        else {checkboxAInit[i].checked = true;}
    }

    // åˆå§‹åŒ–PageBå¤é€‰æ¡†
    var checkboxBInit = document.getElementsByName("checkboxB");
    //å¾ªç¯å¤šé€‰æ¡†æ•°ç»„
    for (var i = 0; i < 4; i++) {
        if (localStorage.getItem(checkboxBInit[i].value) == 'true') {
            checkboxBInit[i].checked = true;}
        else if (localStorage.getItem(checkboxBInit[i].value) == 'false')
            {checkboxBInit[i].checked = false;}
        else {if(i==0) checkboxBInit[i].checked = false; else checkboxBInit[i].checked = true;}
    }
    if ((!localStorage.getItem("customAPI")) || localStorage.getItem("customAPI") == ""){checkboxBInit[4].value="//waifuapi.zerolite.cn/live2d-api/";}
    else {checkboxBInit[4].value=localStorage.getItem("customAPI");} //è‡ªå®šä¹‰APIè·å–
    if ((!localStorage.getItem("customSearch")) || localStorage.getItem("customSearch") == ""){checkboxBInit[5].value="https://www.google.com/search?q=";}
    else {checkboxBInit[5].value=localStorage.getItem("customSearch");} //è‡ªå®šä¹‰æœç´¢å¼•æ“è·å–

    //åˆå§‹åŒ–PageCå¤é€‰æ¡†
    var checkboxCInit = document.getElementsByName("checkboxC");
    if (localStorage.getItem(checkboxCInit[0].value) == 'true') {checkboxCInit[0].checked = true;}
    if (localStorage.getItem(checkboxCInit[3].value) == 'true') {checkboxCInit[3].checked = true;
        document.getElementById("localModelCurrentPath").innerHTML="å½“å‰æ–‡ä»¶ä¸º"+localStorage.getItem('localModelPath');}
    
    function closeset() {ipcRenderer.send('Settings','Close');} // å…³é—­
    
    function setpageA() { //ç‚¹å‡»æ˜¾ç¤ºè®¾ç½®é¡µé¢A
        document.getElementById("setpageA").style.display="block";
        document.getElementById("setpageB").style.display="none";
        document.getElementById("setpageC").style.display="none";
        document.getElementById("setTabA").style.backgroundColor="rgb(85, 85, 85)";
        document.getElementById("setTabB").style.backgroundColor="rgb(223, 223, 223)";
        document.getElementById("setTabC").style.backgroundColor="rgb(223, 223, 223)";
        document.getElementById("setTabA").style.color="whitesmoke";
        document.getElementById("setTabB").style.color="black";
        document.getElementById("setTabC").style.color="black";
    }
    
    function setpageB() { //ç‚¹å‡»æ˜¾ç¤ºè®¾ç½®é¡µé¢B
        document.getElementById("setpageA").style.display="none";
        document.getElementById("setpageB").style.display="block";
        document.getElementById("setpageC").style.display="none";
        document.getElementById("setTabA").style.backgroundColor="rgb(223, 223, 223)";
        document.getElementById("setTabB").style.backgroundColor="rgb(85, 85, 85)";
        document.getElementById("setTabC").style.backgroundColor="rgb(223, 223, 223)";
        document.getElementById("setTabB").style.color="whitesmoke";
        document.getElementById("setTabA").style.color="black";
        document.getElementById("setTabC").style.color="black";
    }
    
    function setpageC() { //ç‚¹å‡»æ˜¾ç¤ºè®¾ç½®é¡µé¢C
        document.getElementById("setpageA").style.display="none";
        document.getElementById("setpageB").style.display="none";
        document.getElementById("setpageC").style.display="block";
        document.getElementById("setTabA").style.backgroundColor="rgb(223, 223, 223)";
        document.getElementById("setTabB").style.backgroundColor="rgb(223, 223, 223)";
        document.getElementById("setTabC").style.backgroundColor="rgb(85, 85, 85)";
        document.getElementById("setTabC").style.color="whitesmoke";
        document.getElementById("setTabA").style.color="black";
        document.getElementById("setTabB").style.color="black";
    }

    function submitA() { //ç‚¹å‡»ä¿å­˜A
        var checkboxA = document.getElementsByName("checkboxA");
        //å¾ªç¯å¤šé€‰æ¡†æ•°ç»„
        for (var i = 0; i < checkboxA.length; i++) {
                if (checkboxA[i].checked == true) {
                    localStorage.setItem(checkboxA[i].value,true);
                }
                else {localStorage.setItem(checkboxA[i].value,false);}
        }
        ipcRenderer.send('Mainpage','Refresh');
    }

    function submitB() { //ç‚¹å‡»ä¿å­˜B
        var checkboxB = document.getElementsByName("checkboxB");
        for (var i = 0; i < 4; i++) {
            if (checkboxB[i].checked == true) {localStorage.setItem(checkboxB[i].value,true);}
            else {localStorage.setItem(checkboxB[i].value,false);}
        }
        localStorage.setItem("customAPI",checkboxB[4].value); //ä¿å­˜è‡ªå®šä¹‰API
        localStorage.setItem("customSearch",checkboxB[5].value); //ä¿å­˜è‡ªå®šä¹‰æœç´¢å¼•æ“
        ipcRenderer.send('Mainpage','Refresh');
    }

    function submitC() { //ç‚¹å‡»ä¿å­˜C
        var checkboxC = document.getElementsByName("checkboxC");
        if (checkboxC[0].checked == true) {localStorage.setItem(checkboxC[0].value,true);}
        else {localStorage.setItem(checkboxC[0].value,false);}
        if (checkboxC[2].checked == true) {ipcRenderer.send('dev','Open');} //Develop Mode æ— è®°å¿†
        if (checkboxC[3].checked == true) {localStorage.setItem(checkboxC[3].value,true);} //æœ¬åœ°æ¨¡å¼
        else {localStorage.setItem(checkboxC[3].value,false);}

        if(document.getElementById('localModelSelect').files[0])
        {
            //è·å–è¯»å–æ–‡ä»¶çš„Fileå¯¹è±¡
            var selectedModel = document.getElementById('localModelSelect').files[0];
            var Filename = selectedModel.name;//è¯»å–é€‰ä¸­æ–‡ä»¶çš„æ–‡ä»¶å
            var ModelUrl = selectedModel.path;
            localStorage.setItem("localModelPath",ModelUrl); //ä¿å­˜ModelPath
            document.getElementById("localModelCurrentPath").innerHTML="å½“å‰æ–‡ä»¶ä¸º"+localStorage.getItem('localModelPath');
            console.log(Filename,ModelUrl);
        }
        ipcRenderer.send('Mainpage','Refresh');
    }
</script>
</html>